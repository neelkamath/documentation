# Опубликовать ваш проект SubQuery

## Преимущества хостинга вашего проекта с SubQuery

- Мы будем выполнять ваши проекты SubQuery для вас в высокопроизводительной, масштабируемой и управляемой публичной службе.
- Эта услуга предоставляется сообществу бесплатно!
- Вы можете сделать свои проекты публичными, чтобы они были перечислены в [SubQuery Explorer](https://explorer.subquery.network) и любой человек в мире мог их просмотреть.
- Мы интегрированы с GitHub, поэтому все члены ваших организаций GitHub смогут просматривать общие проекты организации.

## Создайте свой первый проект в разделе SubQuery Projects

### Хостинг кодовой базы проекта

Существует два способа размещения кодовой базы вашего проекта SubQuery перед публикацией.

**GitHub**: Кодовая база вашего проекта должна находиться в публичном репозитории GitHub.

**IPFS**: Кодовая база вашего проекта может храниться в IPFS, вы можете следовать нашему руководству по хостингу IPFS, чтобы узнать, как [первая публикация в IPFS](../run_publish/ipfs.md).

### Вход в проекты SubQuery

Перед началом работы убедитесь, что кодовая база вашего проекта SubQuery находится в открытом репозитории GitHub или на IPFS. Файл `schema.graphql` должен находиться в корне вашего каталога.

Чтобы создать свой первый проект, перейдите в раздел [SubQuery Projects](https://project.subquery.network). Для входа в систему вам потребуется аутентификация с помощью учетной записи GitHub.

При первом входе в систему вам будет предложено авторизоваться в SubQuery. Ваш адрес электронной почты нужен нам только для идентификации вашего аккаунта, никакие другие данные из вашего аккаунта на GitHub мы не используем ни для каких других целей. На этом шаге вы также можете запросить или предоставить доступ к своей учетной записи GitHub Organization, чтобы вы могли размещать проекты SubQuery под своей GitHub Organization вместо личной учетной записи.

![Отмена одобрения учетной записи GitHub](/assets/img/project_auth_request.png)

SubQuery Projects - это место, где вы управляете всеми своими проектами, загруженными на платформу SubQuery. Вы можете создавать, удалять и даже обновлять проекты из этого приложения.

![Вход в проекты](/assets/img/projects-dashboard.png)

Если у вас подключены аккаунты GitHub Organization, вы можете использовать переключатель в заголовке, чтобы переключаться между личным аккаунтом и аккаунтом GitHub Organization. Проекты, созданные в учетной записи GitHub Organization, распространяются между членами этой GitHub Organization. Для подключения учетной записи GitHub Organization вы можете [последовать следующим шагам](publish.md#add-github-organization-account-to-subquery-projects).

![Переключение между учетными записями GitHub](/assets/img/projects-account-switcher.png)

### Создайте свой первый проект

Существует два способа создания проекта в SubQuery Managed Service, вы можете использовать пользовательский интерфейс или непосредственно через инструмент `subql` cli.

#### Использование пользовательского интерфейса

Начнем с нажатия кнопки "Создать проект". Вы попадете на форму "Новый проект". Пожалуйста, введите следующие данные (вы можете изменить их в будущем):

- ** Учетная запись GitHub: ** Если у вас есть более одной учётной записи GitHub, выберите, под какой учётной записью будет создан этот проект. Проекты, созданные в учетной записи организации GitHub, совместно используются участниками в этой организации.
- **Название проекта**
- **Тема**
- **Описание**
- ** URL-адрес репозитория GitHub: ** Это должен быть действующий URL-адрес GitHub для общедоступного репозитория, в котором находится ваш проект SubQuery. Пожалуйста, введите следующие данные (вы можете изменить их в будущем):
- ** База данных:** Премиум-клиенты могут получить доступ к выделенным базам данных для размещения производственных проектов SubQuery. Если это вас интересует, вы можете связаться с [sales@subquery.network](mailto:sales@subquery.network), чтобы включить эту настройку.
- **Источник развертывания:** Вы можете выбрать развертывание проекта из репозитория GitHub или альтернативное развертывание из IPFS CID, см. наше руководство о [хостинге с IPFS.](ipfs.md)
- **Скрыть проект:** Это скроет ваш проект для публичного изучения. Не устанавливайте этот флажок, если хотите поделиться своим проектом с сообществом!

![Создайте свой первый проект](/assets/img/projects-create.png)

Создайте свой проект, и вы увидите его в списке SubQuery Project. _ Мы почти у цели! Нам просто нужно развернуть новую версию._

![Созданный проект без развертывания](/assets/img/projects-no-deployment.png)

#### Использование CLI

Вы также можете использовать `@subql/cli` для публикации вашего проекта в нашей управляемой службе. Для этого необходимо:

- `@subql/cli` версии 1.1.0 или выше.
- Действительный [SUBQL_ACCESS_TOKEN](../run_publish/ipfs.md#prepare-your-subql-access-token) готов.

```shell
// Создание проекта с помощью CLI
$ subql project:create-project

// ИЛИ при неинтерактивном использовании, он подскажет вам, если отсутствуют необходимые поля
$ subql project:create-project
    --apiVersion=apiVersion Версия Api по умолчанию равна 2
    --description=description Введите описание
    --gitRepo=gitRepo Введите git-репозиторий
    --org=org Введите имя организации
    --projectName=projectName Введите имя проекта
```

### Разверните свою первую версию

Существует два способа развертывания новой версии вашего проекта в SubQuery Managed Service: вы можете использовать пользовательский интерфейс или непосредственно инструмент `subql` cli.

#### Использование пользовательского интерфейса

Хотя создание проекта настроит поведение проекта на экране, вы должны развернуть его версию, прежде чем он начнет работать. Развертывание версии запускает новую операцию индексирования SubQuery и устанавливает необходимую службу запросов, чтобы начать принимать запросы GraphQL. Здесь же можно развернуть новые версии в существующих проектах.

В новом проекте вы увидите кнопку Развернуть новую версию. Щелкните это и заполните необходимую информацию о развертывании:

- **Branch:** На GitHub выберите ветвь проекта, из которой вы хотите развернуть проект.
- **Commit Hash:** На GitHub выберите конкретный коммит той версии кодовой базы вашего проекта SubQuery, которую вы хотите развернуть.
- **IPFS:** При развертывании из IPFS вставьте CID развертывания IPFS (без ведущего `ipfs://`).
- **Override Network and Dictionary Endpoints:** Здесь вы можете переопределить конечные точки в манифесте вашего проекта.
- **Indexer Version:** Это версия службы узла SubQuery, на которой вы хотите запустить этот SubQuery. См. [`@ subql / node`](https://www.npmjs.com/package/@subql/node).
- **Query Version:** Это версия службы запросов SubQuery, на которой вы хотите запустить этот SubQuery. См. [`@subql/query`](https://www.npmjs.com/package/@subql/query).

![Разверните свой первый проект](https://static.subquery.network/media/projects/projects-first-deployment.png)

При успешном развертывании вы увидите, как индексатор начинает работать и сообщает о ходе индексирования текущей цепочки. Этот процесс может занять некоторое время до достижения 100%.

#### Использование CLI

Вы также можете использовать `@subql/cli` для создания нового развертывания вашего проекта в нашей управляемой службе. Для этого необходимо:

- `@subql/cli` версии 1.1.0 или выше.
- Действительный [SUBQL_ACCESS_TOKEN](../run_publish/ipfs.md#prepare-your-subql-access-token) готов.

```shell
// Deploy using the CLI
$ subql deployment:deploy

// OR Deploy using non-interactive CLI
$ subql deployment:deploy

  -d, --useDefaults                Use default values for indexerVerion, queryVersion, dictionary, endpoint
  --dict=dict                      Enter dictionary
  --endpoint=endpoint              Enter endpoint
  --indexerVersion=indexerVersion  Enter indexer-version
  --ipfsCID=ipfsCID                Enter IPFS CID
  --org=org                        Enter organization name
  --projectName=projectName        Enter project name
  --queryVersion=queryVersion      Enter query-version
  --type=(stage|primary)           [default: primary]
```

## Следующие шаги - подключитесь к вашему проекту

После успешного завершения установки и успешного индексирования нашими узлами ваших данных из цепочки, вы сможете подключиться к вашему проекту через отображённую конечную точку запроса GraphQL Query.

![Проект будет развернут и синхронизирован](/assets/img/projects-deploy-sync.png)

Кроме того, вы можете щелкнуть три точки рядом с названием вашего проекта и просмотреть его в SubQuery Explorer. Там вы можете использовать внутрибраузерную игровую площадку для начала работы - [читайте больше о том, как использовать наш Explorer здесь](../run_publish/query.md).

![Проекты в SubQuery Explorer](/assets/img/projects-explorer.png)

## Добавить учетную запись организации GitHub в проекты подзапроса

Обычно проект SubQuery публикуется под именем вашей учетной записи GitHub Organization, а не вашей личной учетной записи GitHub. В любой момент вы можете изменить выбранную учетную запись на [SubQuery Projects](https://project.subquery.network) с помощью переключателя учетных записей.

![Переключение между учетными записями GitHub](/assets/img/projects-account-switcher.png)

Если вы не видите учетную запись организации GitHub в списке переключателя, возможно, вам необходимо предоставить доступ к SubQuery для вашей организации GitHub (или запросить его у администратора). Для этого сначала нужно отозвать разрешения из учетной записи GitHub на приложение SubQuery. Для этого войдите в настройки вашей учетной записи на GitHub, перейдите в раздел Applications и на вкладке Authorized OAuth Apps отмените SubQuery - [ вы можете следовать точным шагам здесь](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/reviewing-your-authorized-applications-oauth). ** Не волнуйтесь, это не удалит ваш проект SubQuery, и вы не потеряете никаких данных.**

![Отозвать доступ к учетной записи GitHub](/assets/img/project_auth_revoke.png)

После отзыва доступа выйдите из [SubQuery Projects](https://project.subquery.network) и снова войдите в систему. Вы должны быть перенаправлены на страницу под названием _Authorize SubQuery_, где вы можете запросить или предоставить SubQuery доступ к вашей учетной записи GitHub Organization. Если у вас нет прав администратора, вы должны сделать запрос администратору, чтобы он включил это для вас.

![Отмена одобрения учетной записи GitHub](/assets/img/project_auth_request.png)

Как только этот запрос будет одобрен вашим администратором (или если вы сможете удовлетворить его самостоятельно), вы увидите правильную учетную запись GitHub Organization в переключателе учетных записей.
